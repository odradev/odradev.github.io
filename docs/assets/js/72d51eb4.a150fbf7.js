"use strict";(self.webpackChunkodra_website=self.webpackChunkodra_website||[]).push([[55702],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>u});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=s(n),u=o,h=m["".concat(c,".").concat(u)]||m[u]||p[u]||r;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},79939:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(87462),o=(n(67294),n(3905));const r={sidebar_position:12},i="Odra CLI",l={unversionedId:"tutorials/odra-cli",id:"version-2.3.0/tutorials/odra-cli",title:"Odra CLI",description:"The Odra CLI library allows you to create CLI clients for your contracts. Instead of using casper-client with",source:"@site/versioned_docs/version-2.3.0/tutorials/odra-cli.md",sourceDirName:"tutorials",slug:"/tutorials/odra-cli",permalink:"/docs/2.3.0/tutorials/odra-cli",draft:!1,tags:[],version:"2.3.0",lastUpdatedAt:1756362595,formattedLastUpdatedAt:"Aug 28, 2025",sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"Upgrading Contracts",permalink:"/docs/2.3.0/tutorials/upgrades"},next:{title:"Migrations",permalink:"/docs/2.3.0/category/migrations"}},c={},s=[{value:"Example",id:"example",level:2},{value:"Cargo.toml",id:"cargotoml",level:3},{value:"Deploy script",id:"deploy-script",level:3},{value:"Scenarios",id:"scenarios",level:3},{value:"Contract methods",id:"contract-methods",level:3},{value:"Builder",id:"builder",level:3},{value:"How to use it",id:"how-to-use-it",level:2},{value:"Deploy command",id:"deploy-command",level:3},{value:"Contract command",id:"contract-command",level:3},{value:"Print-events command",id:"print-events-command",level:3},{value:"Scenario command",id:"scenario-command",level:3}],d={toc:s};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"odra-cli"},"Odra CLI"),(0,o.kt)("p",null,"The Odra CLI library allows you to create CLI clients for your contracts. Instead of using ",(0,o.kt)("inlineCode",{parentName:"p"},"casper-client")," with\ncomplex incantations, you can use the Odra CLI library to create a client that will be able to call your contract methods\ndirectly, by name, and with the correct arguments."),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"Let's go through an example available in the odra repository to see how to use the Odra CLI library.\nIt creates a CLI tool for a useful ",(0,o.kt)("inlineCode",{parentName:"p"},"DogContract"),"."),(0,o.kt)("h3",{id:"cargotoml"},"Cargo.toml"),(0,o.kt)("p",null,"To use the Odra CLI library in your project, you need to add ",(0,o.kt)("inlineCode",{parentName:"p"},"odra-cli")," to your ",(0,o.kt)("inlineCode",{parentName:"p"},"Cargo.toml")," file, alongside a new binary:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'[dependencies]\n...\nodra-cli = "2"\n...\n\n[[bin]]\nname = "odra-cli"\npath = "bin/odra-cli.rs"\n')),(0,o.kt)("p",null,"Then, create an empty file in the ",(0,o.kt)("inlineCode",{parentName:"p"},"bin")," directory named ",(0,o.kt)("inlineCode",{parentName:"p"},"odra-cli.rs"),"."),(0,o.kt)("h3",{id:"deploy-script"},"Deploy script"),(0,o.kt)("p",null,"The first type of script we can create is a deploy script. It is used to deploy the contract to the network and store the address of the deployed contract in a container for later use."),(0,o.kt)("p",null,"Only one deploy script can be used in a single CLI tool, and it is executed when the user runs the ",(0,o.kt)("inlineCode",{parentName:"p"},"deploy")," command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="bin/odra-cli.rs"',title:'"bin/odra-cli.rs"'},'use odra::host::HostEnv;\nuse odra_cli::{\n    deploy::DeployScript,\n    DeployerExt, DeployedContractsContainer,\n};\nuse odra_examples::features::storage::variable::{DogContract, DogContractInitArgs};\n\n/// Deploys the `DogContract` and adds it to the container.\npub struct DeployDogScript;\n\nimpl DeployScript for DeployDogScript {\n    fn deploy(\n        &self,\n        env: &HostEnv,\n        container: &mut DeployedContractsContainer\n    ) -> Result<(), odra_cli::deploy::Error> {\n        env.set_gas(350_000_000_000);\n        let dog_contract = DogContract::try_deploy(\n            env,\n            DogContractInitArgs {\n                barks: true,\n                weight: 10,\n                name: "Mantus".to_string()\n            }\n        )?;\n        container.add_contract(&dog_contract)?;\n\n        // By default, a contract is non-upgradeable, you can change it by passing `InstallConfig`\n        _ = DogContract::try_deploy_with_cfg(\n            env,\n            DogContractInitArgs {\n                barks: true,\n                weight: 10,\n                name: "Mantus".to_string()\n            },\n            InstallConfig::upgradable::<DogContract>(),\n        )?;\n\n        // Alternatively, you can use the `DeployerExt` trait to deploy the contract:\n        _ = DogContract::load_or_deploy(\n            env,\n            DogContractInitArgs {\n                barks: true,\n                weight: 10,\n                name: "Mantus".to_string()\n            },\n            container,\n            350_000_000_000\n        )?;\n\n        // You can use `load_or_deploy_with_cfg` to deploy the contract with a custom configuration\n         _ = DogContract::load_or_deploy_with_cfg(\n            env,\n            DogContractInitArgs {\n                barks: true,\n                weight: 10,\n                name: "Mantus".to_string()\n            },\n            InstallConfig::upgradable::<DogContract>(),\n            container,\n            350_000_000_000\n        )?;\n        Ok(())\n    }\n}\n')),(0,o.kt)("p",null,"In the example above, we see a few alternative implementations of a simple ",(0,o.kt)("inlineCode",{parentName:"p"},"DeployScript")," for our ",(0,o.kt)("inlineCode",{parentName:"p"},"DogContract"),". All of them set the gas limit,\ndeploy the contract and adds it to a container."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"DogContract::try_deploy")," method, which deploys the contract every time the script is run. "),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"DogContract::try_deploy_with_cfg")," also deploys a contract everytime, but passes ",(0,o.kt)("a",{parentName:"li",href:"https://docs.rs/odra/2.2.0/odra/host/struct.InstallConfig.html"},(0,o.kt)("inlineCode",{parentName:"a"},"InstallConfig"))," instance to configure the deployment using a factory method ",(0,o.kt)("inlineCode",{parentName:"li"},"InstallConfig::upgradable"),"."),(0,o.kt)("li",{parentName:"ol"},"Utilizes the ",(0,o.kt)("a",{parentName:"li",href:"https://docs.rs/odra-cli/2.2.0/odra_cli/trait.DeployerExt.html"},(0,o.kt)("inlineCode",{parentName:"a"},"DeployerExt"))," trait, which checks if the contract is already deployed and returns the existing instance if it is, or deploys it if it is not. It is a convenient way to ensure that the contract is deployed only once. It is useful when you want to add more contracts to the script in the future and avoid redeploying previously deployed contracts. "),(0,o.kt)("li",{parentName:"ol"},"The last option is to use ",(0,o.kt)("inlineCode",{parentName:"li"},"DeployerExt::load_or_deploy_with_cfg")," that works like the previous one, but accepts a custom configuration.")),(0,o.kt)("p",null,"The address of the deployed contract is stored in a TOML file in the ",(0,o.kt)("inlineCode",{parentName:"p"},"resources")," directory, which is created automatically by the Odra CLI library."),(0,o.kt)("h3",{id:"scenarios"},"Scenarios"),(0,o.kt)("p",null,"Scenarios are a way to run multiple calls one after another, and can be used to test the contract or perform complex operations\nlike setting up the dependencies between contracts.\nTo create a scenario, you need to implement the ",(0,o.kt)("inlineCode",{parentName:"p"},"Scenario")," trait and add it to the ",(0,o.kt)("inlineCode",{parentName:"p"},"OdraCli")," instance in the main function.\nA scenario also implements the ",(0,o.kt)("inlineCode",{parentName:"p"},"ScenarioMetadata")," trait, which provides metadata about the scenario, such as its name and description. You can use this metadata to display the scenario in the CLI tool and provide a description of what it does."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="bin/odra-cli.rs"',title:'"bin/odra-cli.rs"'},'use odra_cli::{\n    scenario::{Args, Error, Scenario, ScenarioMetadata},\n    CommandArg, ContractProvider, DeployedContractsContainer,\n};\nuse std::vec;\n\npub struct DogCheckScenario;\n\nimpl Scenario for DogCheckScenario {\n    fn args(&self) -> Vec<CommandArg> {\n        vec![CommandArg::new(\n            "name",\n            "The name of the dog",\n            NamedCLType::String,\n        ).required()]\n    }\n\n    fn run(\n        &self,\n        env: &HostEnv,\n        container: &DeployedContractsContainer,\n        args: Args\n    ) -> Result<(), Error> {\n        let dog_contract = container.contract_ref::<DogContract>(env)?;\n        let test_name = args.get_single::<String>("name")?;\n\n        env.set_gas(50_000_000);\n        let actual_name = dog_contract.try_name()?;\n\n        assert_eq!(test_name, actual_name, "Dog name mismatch");\n\n        Ok(())\n    }\n}\n\nimpl ScenarioMetadata for DogCheckScenario {\n    const NAME: &\'static str = "check";\n    const DESCRIPTION: &\'static str =\n        "Checks if the name of the deployed dog matches the provided name";\n}\n')),(0,o.kt)("p",null,"A scenario must implement the ",(0,o.kt)("inlineCode",{parentName:"p"},"Scenario")," trait, which requires defining the ",(0,o.kt)("inlineCode",{parentName:"p"},"args")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"run")," methods.\nThe ",(0,o.kt)("inlineCode",{parentName:"p"},"args")," method returns a vector of ",(0,o.kt)("inlineCode",{parentName:"p"},"CommandArg")," that defines the arguments that the scenario accepts.\nIn this case, we define a single argument ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," of type ",(0,o.kt)("inlineCode",{parentName:"p"},"String"),", which is required - the program will\nfail at parse time if the argument is not provided."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"run")," method is where the scenario logic is implemented. It receives the ",(0,o.kt)("inlineCode",{parentName:"p"},"HostEnv"),", a container with deployed contracts, and the arguments passed to the scenario. To load the contract, we use the ",(0,o.kt)("inlineCode",{parentName:"p"},"ContractProvider")," trait, which allows us to get a reference to the contract by its type. The trait is implemented for the ",(0,o.kt)("inlineCode",{parentName:"p"},"DeployedContractsContainer"),", which is passed to the ",(0,o.kt)("inlineCode",{parentName:"p"},"run")," method.\nTo read the arguments, we use the ",(0,o.kt)("inlineCode",{parentName:"p"},"Args")," type, which provides two methods: ",(0,o.kt)("inlineCode",{parentName:"p"},"get_single")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"get_many"),". In this case, we use ",(0,o.kt)("inlineCode",{parentName:"p"},"get_single")," to get the value of the ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," argument.\nIf we want to get multiple values for an argument, we must define the argument as ",(0,o.kt)("inlineCode",{parentName:"p"},'CommandArg::new("name", "The name of the dog", NamedCLType::String).list()'),", where ",(0,o.kt)("inlineCode",{parentName:"p"},"list()")," indicates that the argument can be provided multiple times."),(0,o.kt)("p",null,"The example above performs a simple check on the return value of one of the methods.\nOf course, there is no limit to how complex a scenario can be."),(0,o.kt)("h3",{id:"contract-methods"},"Contract methods"),(0,o.kt)("p",null,"To interact with the contract methods, we can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"contract")," command. The Odra CLI automatically generates commands for each contract method, allowing us to call them directly by name. But first, we need to register the contract in the ",(0,o.kt)("inlineCode",{parentName:"p"},"OdraCli")," instance."),(0,o.kt)("h3",{id:"builder"},"Builder"),(0,o.kt)("p",null,"Now, let's put everything together in the main function. We will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"OdraCli")," builder to create a CLI tool that can deploy the contract, call its methods, and run scenarios."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust",metastring:'title="bin/odra-cli.rs"',title:'"bin/odra-cli.rs"'},'use odra_cli::OdraCli;\n\n/// Main function to run the CLI tool.\npub fn main() {\n    OdraCli::new()\n        .about("Dog contract cli tool")\n        .deploy(DeployDogScript)\n        .contract::<DogContract>()\n        .scenario(DogCheckScenario)\n        .build()\n        .run();\n}\n')),(0,o.kt)("p",null,"This code creates a new ",(0,o.kt)("inlineCode",{parentName:"p"},"OdraCli")," instance, sets the description of the tool, adds the deploy script, registers the ",(0,o.kt)("inlineCode",{parentName:"p"},"DogContract"),", and adds the scenario. Finally, it builds the CLI tool and runs it."),(0,o.kt)("h2",{id:"how-to-use-it"},"How to use it"),(0,o.kt)("p",null,"Assuming the correct ",(0,o.kt)("a",{parentName:"p",href:"/docs/2.3.0/backends/livenet"},"livenet")," environment is set up, you can run the CLI tool using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra-cli\n")),(0,o.kt)("p",null,"This will display all of our options:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Dog contract cli tool\n\nUsage: odra_cli [OPTIONS] <COMMAND>\n\nCommands:\n  deploy        Runs the deploy script\n  contract      Commands for interacting with contracts\n  scenario      Commands for interacting with scenarios\n  print-events  Prints the most recent events emitted by a contract\n  help          Print this message or the help of the given subcommand(s)\n\nOptions:\n  -c, --contracts-toml <PathBuf>  The path to the file with the deployed contracts. Relative to the project root.\n  -h, --help                      Print help\n")),(0,o.kt)("p",null,"By default, contracts are written/read to/from the ",(0,o.kt)("inlineCode",{parentName:"p"},"contracts.toml")," file, which is located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"resources")," directory, but you can specify a different path using the ",(0,o.kt)("inlineCode",{parentName:"p"},"-c")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"--contracts-toml")," option."),(0,o.kt)("h3",{id:"deploy-command"},"Deploy command"),(0,o.kt)("p",null,"First, we need to deploy the contract:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli deploy\n")),(0,o.kt)("p",null,"This gives us the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'cargo run --bin odra_cli -- deploy\n   Compiling odra-examples v2.1.0 (/home/kuba/Projekty/odra/odra/examples)\n    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.65s\n     Running `../target/debug/odra_cli deploy`\n\ud83d\udc81  INFO : Found wasm under "wasm/DogContract.wasm".\n\ud83d\udc81  INFO : Deploying "DogContract".\n\ud83d\ude44  WAIT : Waiting 10 for V1(TransactionV1Hash(4230d5ca3113d87190e4136cefe097bd08fea03c841ce5e4df73a049e10208f1)).\n\ud83d\udc81  INFO : Transaction "4230d5ca3113d87190e4136cefe097bd08fea03c841ce5e4df73a049e10208f1" successfully executed.\n\ud83d\udd17  LINK : \n\ud83d\udc81  INFO : Contract "contract-package-53b3486180b2a9506fbb0523ed159b1908cec628d091b19cbe74e057e7ebbc8b" deployed.\n\ud83d\udc81  INFO : Command executed successfully\n')),(0,o.kt)("p",null,"This will run the deploy script and create a new file in the ",(0,o.kt)("inlineCode",{parentName:"p"},"resources")," directory named ",(0,o.kt)("inlineCode",{parentName:"p"},"contracts.toml"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'last_updated = "2025-07-03T10:33:55Z"\n\n[[contracts]]\nname = "DogContract"\npackage_hash = "hash-53b3486180b2a9506fbb0523ed159b1908cec628d091b19cbe74e057e7ebbc8b"\n')),(0,o.kt)("p",null,"All the calls to the contract will be made using this package hash, unless you specify a different one using the ",(0,o.kt)("inlineCode",{parentName:"p"},"-c")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"--contracts-toml")," option."),(0,o.kt)("h3",{id:"contract-command"},"Contract command"),(0,o.kt)("p",null,"To call a contract method, we need to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"contract")," command. The command itself will display all the available contracts:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract\n")),(0,o.kt)("p",null,"This outputs:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Commands for interacting with contracts\n\nUsage: odra_cli contract <COMMAND>\n\nCommands:\n  DogContract  Commands for interacting with the DogContract contract\n  help         Print this message or the help of the given subcommand(s)\n")),(0,o.kt)("p",null,"And when a contract is selected, it will show us the available methods:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract DogContract\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Commands for interacting with the DogContract contract\n\nUsage: odra_cli contract DogContract <COMMAND>\n\nCommands:\n  barks               Returns true if the dog barks.\n  weight              Returns the dog's weight.\n  name                Returns the dog's name.\n  walks_amount        Adds a walk to the dog's walks.\n  walks_total_length  Returns the total length of the dog's walks.\n  help                Print this message or the help of the given subcommand(s)\n")),(0,o.kt)("p",null,"To run a command, compose a command like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract DogContract barks\n")),(0,o.kt)("p",null,"This will result in:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"\ud83d\udc81  INFO : Call result: true\n\ud83d\udc81  INFO : Command executed successfully\n")),(0,o.kt)("p",null,"If you run a command that requires arguments, it will display an error message:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract DogContract rename \n\nerror: the following required arguments were not provided:\n  --new_name <String>\n  --gas <U64>\n\nUsage: odra_cli contract DogContract rename --new_name <String> --gas <U64>\n\nFor more information, try '--help'.\n")),(0,o.kt)("p",null,"The error message above indicates that the ",(0,o.kt)("inlineCode",{parentName:"p"},"rename")," method requires two arguments: ",(0,o.kt)("inlineCode",{parentName:"p"},"new_name")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"gas"),". In the code,\nthe ",(0,o.kt)("inlineCode",{parentName:"p"},"rename")," method is mutable and takes a single argument ",(0,o.kt)("inlineCode",{parentName:"p"},"new_name")," of type ",(0,o.kt)("inlineCode",{parentName:"p"},"String"),".\nAs the entry point is mutable and requires a real transaction, the ",(0,o.kt)("inlineCode",{parentName:"p"},"gas")," argument is also required to specify how much\ngas to use for the call. The gas amount is denominated in motes."),(0,o.kt)("p",null,"Let's run the command with the required arguments:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract DogContract rename --new_name \"Doggy\" --gas 200000000\n\nerror: invalid value '200000000' for '--gas <U64>': 200000000 is not in 2500000000..18446744073709551615\n")),(0,o.kt)("p",null,"As the minimum gas amount for a transaction is 2.5 CSPRs, we need to increase the gas amount to at least that value:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'cargo run --bin odra_cli -- contract DogContract rename --new_name "Doggy" --gas 2500000000\n\n\ud83d\udc81  INFO : Calling "contract-package-0eda9544d667775d8e5503543dd8ba0996d439fd9ded79cfe28454d07f42df3a" directly with entrypoint "rename".\n\ud83d\ude44  WAIT : Waiting 10 for V1(TransactionV1Hash(e9d2e7f9d7d832cbf64e6e9eb09404423757e354a1ed7420c0398d851fea3a40)).\n\ud83d\udc81  INFO : Transaction "e9d2e7f9d7d832cbf64e6e9eb09404423757e354a1ed7420c0398d851fea3a40" successfully executed.\n\ud83d\udd17  LINK : \n\ud83d\udc81  INFO : Call executed successfully, but no result was returned.\n\ud83d\udc81  INFO : Command executed successfully\n\n# Verifying the name change\ncargo run --bin odra_cli -- contract DogContract name\n\n\ud83d\udc81  INFO : Call result: Doggy\n\ud83d\udc81  INFO : Command executed successfully\n')),(0,o.kt)("p",null,"There are more options available for the ",(0,o.kt)("inlineCode",{parentName:"p"},"contract")," command that we can discover by running the ",(0,o.kt)("inlineCode",{parentName:"p"},"help")," command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract DogContract rename --help\n\nIt is uncommon but you can change the dog's name.\n\nUsage: odra_cli contract DogContract rename [OPTIONS] --new_name <String> --gas <U64>\n\nOptions:\n      --new_name <String>      \n      --attached_value <U512>  The amount of CSPRs attached to the call\n      --gas <U64>              The amount of gas to attach to the call\n  -p, --print-events           Print events emitted by the contract\n  -h, --help  \n")),(0,o.kt)("p",null,"If you want to print the events emitted by the contract, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--print-events")," option. This will print all the events emitted by the contract during the call."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- contract DogContract rename --new_name \"Doggy\" --gas 2500000000 --print-events\n\n\ud83d\udc81  INFO : Syncing events for the call...\n\ud83d\udc81  INFO : Calling \"contract-package-0eda9544d667775d8e5503543dd8ba0996d439fd9ded79cfe28454d07f42df3a\" directly with entrypoint \"rename\".\n\ud83d\ude44  WAIT : Waiting 10 for V1(TransactionV1Hash(f2f473d46b59c136052f687539ab76e5fbb3af958c483e3a382b5a0e498227c4)).\n\ud83d\udc81  INFO : Transaction \"f2f473d46b59c136052f687539ab76e5fbb3af958c483e3a382b5a0e498227c4\" successfully executed.\n\ud83d\udd17  LINK : \n\ud83d\udc81  INFO : Captured 1 events for contract 'DogContract'\n\ud83d\udc81  INFO : Event 1: 'NamedChanged':\n  'old_name': Mantus\n  'new_name': Doggy\n\n\ud83d\udc81  INFO : Call executed successfully, but no result was returned.\n\ud83d\udc81  INFO : Command executed successfully\n")),(0,o.kt)("p",null,"For a payable method, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--attached_value")," option to specify the amount of CSPRs to attach to the call. The value is denominated in motes."),(0,o.kt)("h3",{id:"print-events-command"},"Print-events command"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"print-events")," command allows you to print the most recent events emitted by a contract. It is useful for debugging and understanding what is happening in the contract."),(0,o.kt)("p",null,"You can run it like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- print-events DogContract --help\n\nPrint events of the DogContract contract\n\nUsage: odra_cli print-events DogContract [OPTIONS]\n\nOptions:\n  -n, --number <N>  Number of events to print [default: 10]\n  -h, --help        Print help\n\ncargo run --bin odra_cli -- print-events DogContract -n 2\n\n\ud83d\udc81  INFO : Printing 4 the most recent events for contract 'DogContract'\n\ud83d\udc81  INFO : Event 1: 'NamedChanged':\n  'old_name': Mantus\n  'new_name': Doggy\n\n\ud83d\udc81  INFO : Event 2: 'NamedChanged':\n  'old_name': Rex\n  'new_name': Mantus\n\n\ud83d\udc81  INFO : Command executed successfully\n")),(0,o.kt)("p",null,"By default, it prints the last 10 events, but you can specify a different number using the ",(0,o.kt)("inlineCode",{parentName:"p"},"-n")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"--number")," option."),(0,o.kt)("h3",{id:"scenario-command"},"Scenario command"),(0,o.kt)("p",null,"Scenarios registered in the ",(0,o.kt)("inlineCode",{parentName:"p"},"OdraCli")," instance can be run using the ",(0,o.kt)("inlineCode",{parentName:"p"},"scenario")," command. It displays all the available scenarios:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- scenario\n")),(0,o.kt)("p",null,"This will output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Commands for running user-defined scenarios\n\nUsage: odra_cli scenario <COMMAND>\n\nCommands:\n  check  Checks if the name of the deployed dog matches the provided name\n  help   Print this message or the help of the given subcommand(s)\n")),(0,o.kt)("p",null,"It can be run like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cargo run --bin odra_cli -- scenario check --name Doggy\n")),(0,o.kt)("p",null,"This will output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'thread \'main\' panicked at examples/bin/odra_cli.rs:59:9:\nassertion `left == right` failed: Dog name mismatch\n  left: "Doggy"\n right: "Mantus"\n\n## Conclusion\n\nThe Odra CLI library provides a powerful and convenient way to create command-line tools for your Odra contracts. It simplifies the process of deploying, interacting with, and testing your contracts, allowing you to focus on the business logic of your application. By following the examples in this tutorial, you can create your own CLI tools and streamline your development workflow.\n')))}p.isMDXComponent=!0}}]);