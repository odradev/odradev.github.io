<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.5.0 plugin-docs plugin-id-default docs-doc-id-backends/casper">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Casper | Odra</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://odra.dev/docs/backends/casper"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.5.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.5.0"><meta data-rh="true" name="docsearch:version" content="2.5.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.5.0"><meta data-rh="true" property="og:title" content="Casper | Odra"><meta data-rh="true" name="description" content="The Casper backend allows you to compile your contracts into WASM files which can be deployed"><meta data-rh="true" property="og:description" content="The Casper backend allows you to compile your contracts into WASM files which can be deployed"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://odra.dev/docs/backends/casper"><link data-rh="true" rel="alternate" href="https://odra.dev/docs/backends/casper" hreflang="en"><link data-rh="true" rel="alternate" href="https://odra.dev/docs/backends/casper" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Odra RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Odra Atom Feed"><link rel="stylesheet" href="/assets/css/styles.9398f3f8.css">
<link rel="preload" href="/assets/js/runtime~main.495076c2.js" as="script">
<link rel="preload" href="/assets/js/main.4ef0cfca.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand"><div class="navbar__logo"><img src="/img/small_logo_light.png" alt="Odra Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/small_logo_dark.png" alt="Odra Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/">2.5.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/backends/casper">next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/backends/casper">2.5.0</a></li><li><a class="dropdown__link" href="/docs/2.4.0/backends/casper">2.4.0</a></li><li><a class="dropdown__link" href="/docs/2.3.1/backends/casper">2.3.1</a></li><li><a class="dropdown__link" href="/docs/2.3.0/backends/casper">2.3.0</a></li><li><a class="dropdown__link" href="/docs/2.2.0/backends/casper">2.2.0</a></li><li><a class="dropdown__link" href="/docs/2.1.0/backends/casper">2.1.0</a></li><li><a class="dropdown__link" href="/docs/2.0.1/backends/casper">2.0.1</a></li><li><a class="dropdown__link" href="/docs/2.0.0/backends/casper">2.0.0</a></li></ul></div><a href="https://github.com/odradev/odra" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://twitter.com/odradev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/Mm5ABc9P8k" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Odra framework</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/getting-started">Getting started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/basics">Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/advanced">Advanced</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/backends">Backends</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backends&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/backends/what-is-a-backend">What is a backend?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/backends/odra-vm">OdraVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/backends/casper">Casper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/backends/livenet">Livenet</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/examples">Examples</a><button aria-label="Toggle the collapsible sidebar category &#x27;Examples&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/migrations">Migrations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Migrations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/backends"><span itemprop="name">Backends</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Casper</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.5.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Casper</h1><p>The Casper backend allows you to compile your contracts into WASM files which can be deployed
onto <a href="https://casper.network/" target="_blank" rel="noopener noreferrer">Casper Blockchain</a>
and lets you to easily run them against <a href="https://crates.io/crates/casper-execution-engine" target="_blank" rel="noopener noreferrer">Casper&#x27;s Execution Engine</a> locally.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contract-env">Contract Env<a href="#contract-env" class="hash-link" aria-label="Direct link to Contract Env" title="Direct link to Contract Env">​</a></h2><p>As with any other backend, Casper Backend must implement the same features, but some do not have native support. Let&#x27;s take a closer look at how Odra overcomes these hindrances.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h3><p>An event is not a first-class citizen in Casper like in Ethereum, so Odra mimics it. As you&#x27;ve
already learned from the <a href="/docs/basics/events">events article</a>, in Odra you emit an event, similarly, you would do it in <a href="https://docs.soliditylang.org/en/v0.8.15/contracts.html#example" target="_blank" rel="noopener noreferrer">Solidity</a>.</p><p>Under the hood, Odra integrates with <a href="https://github.com/make-software/casper-event-standard" target="_blank" rel="noopener noreferrer">Casper Event Standard</a> and creates a few <a href="https://docs.rs/casper-types/latest/casper_types/struct.URef.html" target="_blank" rel="noopener noreferrer"><code>URef</code>s</a> in the global state when a contract is being installed:</p><ol><li><code>__events</code> - a dictionary that stores events&#x27; data.</li><li><code>__events_length</code> - the evens count.</li><li><code>__events_ces_version</code> - the version of <code>Casper Event Standard</code>. </li><li><code>__events_schema</code> -  a dictionary that stores event schemas.</li></ol><p>Besides that, all the events the contract emits are registered - events schemas are written to the storage under the <code>__events_schema</code> key.</p><p>So, <code>Events</code> are nothing different from any other data stored by a contract.</p><p>A struct to be an event must implement traits defined by <a href="https://github.com/make-software/casper-event-standard" target="_blank" rel="noopener noreferrer">Casper Event Standard</a>, thankfully you can derive them using <code>#[odra::event]</code>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Don&#x27;t forget to expose events in the module using <code>#[odra::module(events = [...])]</code>. </p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="payable">Payable<a href="#payable" class="hash-link" aria-label="Direct link to Payable" title="Direct link to Payable">​</a></h3><p>The first Odra idiom is a <code>Contract Main Purse</code>. It is a purse associated with a contract. The purse is created lazily - when the first transfer to the contract occurs, a proper <code>URef</code> and a purse are created and stored under the <code>__contract_main_purse</code> key.</p><p>Casper does not allow direct transfers from an account to a contract, so Odra comes up with the second idiom - a <code>Cargo Purse</code>. It is a one-time-use purse proxy between an account and a contract. First, motes go from the account to the cargo purse and then to the contract&#x27;s main purse.</p><p>Behind the scenes, Odra handles an account-contract transfer via a cargo purse when a function is marked as payable.
If under the way something goes wrong with the transfer, the contract reverts.</p><p>The transferred amount can be read inside the contract by calling <code>self.env().attached_value()</code>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Odra expects the <code>cargo_purse</code> runtime argument to be attached to a contract call.
In case of its absence, the <code>contract_env::attached_value()</code> returns zero.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="revert">Revert<a href="#revert" class="hash-link" aria-label="Direct link to Revert" title="Direct link to Revert">​</a></h3><p>In Casper, we can stop the execution pretty straightforwardly - call the <code>runtime::revert()</code>.
Odra adds an extra abstraction layer - in a contract <code>ExecutionError</code>s are defined, which ultimately are transformed into Casper&#x27;s <a href="https://docs.rs/casper-types/latest/casper_types/enum.ApiError.html" target="_blank" rel="noopener noreferrer"><code>ApiError::User</code></a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context">​</a></h3><p>Casper equips developers with very low-level tooling, which can be cumbersome for newcomers.
If you want to check who called the contract or its address, you can not do it off-hand - you must analyze the call stack.</p><p>The <code>self.env().self_address()</code> function takes the first element of the callstack (<a href="https://docs.rs/casper-contract/latest/casper_contract/contract_api/runtime/fn.get_call_stack.html" target="_blank" rel="noopener noreferrer"><code>runtime::get_call_stack()</code></a>) and casts it to <code>Address</code>.</p><p>The <code>self.env().caller()</code> function takes the second element of the call stack (<code>runtime::get_call_stack()</code>) and casts it to <code>Address</code>.</p><p>As mentioned in the <!-- -->[Payable]<!-- --> section, to store CSPR, each contract creates its purse. To read the contract balance,
you call <code>self.env().self_balance()</code>, which checks the balance of the purse stored under <code>__contract_main_purse</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-env">Test Env<a href="#test-env" class="hash-link" aria-label="Direct link to Test Env" title="Direct link to Test Env">​</a></h2><p>Test environment allows you to test wasm contracts before you deploy them onto the testnet or livenet. It is built on top of the <code>Casper Execution Engine</code>.</p><p>In your test, you can freely switch execution context by setting as a caller (<code>test_env::set_caller()</code>) one of the 20 predefined accounts. Each account possesses the default amount of <code>Motes</code> (100_000_000_000_000_000).</p><p>The Test Env internally keeps track of the current <code>block time</code>, <code>error</code> and <code>attached value</code>.</p><p>Each test is executed on a fresh instance of the Test Env.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2><p>Name of the Casper backend in Odra is <code>casper</code>, so to run the tests against it, simply pass it as a <code>-b</code>
parameter:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cargo odra </span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">test</span><span class="token plain"> -b casper</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to just generate a wasm file, simply run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cargo odra build -b casper</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-a-contract-to-casper-network">Deploying a contract to Casper network<a href="#deploying-a-contract-to-casper-network" class="hash-link" aria-label="Direct link to Deploying a contract to Casper network" title="Direct link to Deploying a contract to Casper network">​</a></h2><p>There would be no point in writing a contract if you couldn&#x27;t deploy it to the blockchain.
You can do it in two ways: provided by the Casper itself: using the <code>casper-client</code> tool
or using the Odra&#x27;s Livenet integration.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In the commands below, we use <code>casper-client</code> version 5.0.0.</p></div></div><p>Let&#x27;s explore the first option to better understand the process.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you wish, you can skip the following section and jump to the <a href="/docs/backends/livenet">Livenet integration</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wasm-arguments">WASM arguments<a href="#wasm-arguments" class="hash-link" aria-label="Direct link to WASM arguments" title="Direct link to WASM arguments">​</a></h3><p>When deploying a new contract you can pass some arguments to it.
Every contract written in Odra expects those arguments to be set:</p><ul><li><code>odra_cfg_package_hash_key_name</code> - <code>String</code> type. The key under which the package hash of the contract will be stored.</li><li><code>odra_cfg_allow_key_override</code> - <code>Bool</code> type. If <code>true</code> and the key specified in <code>odra_cfg_package_hash_key_name</code> already exists, it will be overwritten.</li><li><code>odra_cfg_is_upgradable</code> - <code>Bool</code> type. If <code>true</code>, the contract will be deployed as upgradable.</li><li><code>odra_cfg_is_upgrade</code> - <code>Bool</code> type. If <code>true</code>, the contract will be upgraded. If we want to install a contract to should be set to <code>false</code>.</li></ul><p>Additionally, if required by the contract, you can pass constructor arguments.</p><p>When working with the test env via <code>cargo odra</code> or when using
<a href="/docs/backends/livenet">Livenet integration</a> this is handled automatically. However, if you rather use
<code>casper-client</code> directly, you have to pass them manually:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-deploy-counter">Example: Deploy Counter<a href="#example-deploy-counter" class="hash-link" aria-label="Direct link to Example: Deploy Counter" title="Direct link to Example: Deploy Counter">​</a></h3><p>To deploy your contract with a constructor using <code>casper-client</code>, you need to pass the above arguments.
Additionally, you need to pass the <code>value</code> argument, which sets the arbitrary initial value for the counter.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">casper-client put-transaction session </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --node-address </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">NODE_ADDRESS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --chain-name casper-test </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --secret-key </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">PATH_TO_YOUR_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">/secret_key.pem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --payment-amount </span><span class="token number" style="color:rgb(181, 206, 168)">5000000000000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gas-price-tolerance </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --standard-payment </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --wasm-path ./wasm/counter.wasm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_package_hash_key_name:string:&#x27;counter_package_hash&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_allow_key_override:bool:&#x27;true&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_is_upgradable:bool:&#x27;true&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_is_upgrade:bool:&#x27;false&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;value:u32:42&quot;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For a more in-depth tutorial, please refer to the <a href="https://docs.casper.network/writing-contracts/" target="_blank" rel="noopener noreferrer">Casper&#x27;s &#x27;Writing On-Chain Code&#x27;</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-deploy-erc721">Example: Deploy ERC721<a href="#example-deploy-erc721" class="hash-link" aria-label="Direct link to Example: Deploy ERC721" title="Direct link to Example: Deploy ERC721">​</a></h3><p>Odra comes with a standard ERC721 token implementation.
Clone the main Odra repo and navigate to the <code>modules</code> directory.</p><p>Firstly contract needs to be compiled.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cargo odra build -b casper -c erc721_token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It produces the <code>erc721_token.wasm</code> file in the <code>wasm</code> directory.</p><p>Now it&#x27;s time to deploy the contract.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">casper-client put-transaction session </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --node-address </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">NODE_ADDRESS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --chain-name casper-test </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --secret-key </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">PATH_TO_YOUR_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">/secret_key.pem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --payment-amount </span><span class="token number" style="color:rgb(181, 206, 168)">300000000000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gas-price-tolerance </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --standard-payment </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --wasm-path ./wasm/erc721_token.wasm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_package_hash_key_name:string:&#x27;my_nft&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_allow_key_override:bool:&#x27;false&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_is_upgradable:bool:&#x27;true&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_is_upgrade:bool:&#x27;false&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;name:string:&#x27;MyNFT&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;symbol:string:&#x27;NFT&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;base_uri:string:&#x27;https://example.com/&#x27;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s done.
The contract is deployed and ready to use.
Your account is the owner of the contract and you can mint and burn tokens.
For more details see the code of the <a href="https://github.com/odradev/odra/blob/release/2.2.0/modules/src/erc721_token.rs" target="_blank" rel="noopener noreferrer">ERC721</a> module.</p><p>To obtain the package hash of the contract search for <code>my_nft</code> key
in your account&#x27;s named keys.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-deploy-erc1155">Example: Deploy ERC1155<a href="#example-deploy-erc1155" class="hash-link" aria-label="Direct link to Example: Deploy ERC1155" title="Direct link to Example: Deploy ERC1155">​</a></h3><p>The process is similar to the one described in the previous section.</p><p>Contract compilation:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cargo odra build -b casper -c erc1155_token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Contract deployment:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">casper-client put-transaction session </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --node-address </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">NODE_ADDRESS</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --chain-name casper-test </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --secret-key </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">PATH_TO_YOUR_KEY</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">/secret_key.pem </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --payment-amount </span><span class="token number" style="color:rgb(181, 206, 168)">300000000000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --gas-price-tolerance </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --standard-payment </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --wasm-path ./wasm/erc1155_token.wasm </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_package_hash_key_name:string:&#x27;my_tokens&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_allow_key_override:bool:&#x27;false&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_is_upgradable:bool:&#x27;true&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_is_upgrade:bool:&#x27;false&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  --session-arg </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;odra_cfg_constructor:string:&#x27;init&#x27;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As previously, your account is the owner and can mint and burn tokens.
For more details see the code of the <a href="https://github.com/odradev/odra/blob/release/2.2.0/modules/src/erc1155_token.rs" target="_blank" rel="noopener noreferrer">ERC1155</a> module.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sending-cspr-to-a-contract">Sending CSPR to a contract<a href="#sending-cspr-to-a-contract" class="hash-link" aria-label="Direct link to Sending CSPR to a contract" title="Direct link to Sending CSPR to a contract">​</a></h2><p>Defining payable entry points is described in <a href="/docs/basics/native-token">Native Token</a> section.</p><p>What is happening under the hood is that Odra creates a new <code>cargo_purse</code> argument for each payable
entry point. The <code>cargo_purse</code> needs to be top-upped with CSPR before calling the contract.
When a contract adds CSPR to another contract call, Odra handles it for you.
The problem arises when you want to call an entry point and attach CSPR as an account.
The only way of doing that is by executing code in the sessions context, that
top-ups the <code>cargo_purse</code> and then calls the contract.</p><p>Odra provides a generic <code>proxy_caller.wasm</code> that does exactly that.
You can build it by yourself from the main Odra repository, or use the <a href="https://github.com/odradev/odra/blob/release/2.2.0/odra-casper/test-vm/resources/proxy_caller.wasm" target="_blank" rel="noopener noreferrer">proxy_caller.wasm</a>
we maintain.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-proxy_callerwasm">Using proxy_caller.wasm<a href="#using-proxy_callerwasm" class="hash-link" aria-label="Direct link to Using proxy_caller.wasm" title="Direct link to Using proxy_caller.wasm">​</a></h3><p>To use the <code>proxy_caller.wasm</code> you need to attach the following arguments:</p><ul><li><code>contract_package_hash</code> - <code>BytesArray(32)</code> type. The package hash of the contract you want to call.
Result of <code>to_bytes</code> on <a href="https://docs.rs/casper-types/latest/casper_types/contracts/struct.ContractPackageHash.html" target="_blank" rel="noopener noreferrer">CasperPackageHash</a>.</li><li><code>entry_point</code> - <code>String</code> type. The name of the entry point you want to call.</li><li><code>args</code> - <code>Bytes</code> type. It is a serialized <a href="https://docs.rs/casper-types/latest/casper_types/runtime_args/struct.RuntimeArgs.html" target="_blank" rel="noopener noreferrer">RuntimeArgs</a> with the arguments you want to pass
to the entry point. To be specific it is the result of <code>to_bytes</code> method wrapped with <a href="https://docs.rs/casper-types/latest/casper_types/bytesrepr/struct.Bytes.html" target="_blank" rel="noopener noreferrer">Bytes</a> type.</li><li><code>attached_value</code>. <code>U512</code> type. The amount of CSPR you want to attach to the call.</li><li><code>amount</code>. <code>U512</code> type. Should be the same value as <code>attached_value</code> if not <code>None</code>.
It is a special Casper argument that enables the access to account&#x27;s main purse.</li></ul><p>Currently <code>casper-client</code> doesn&#x27;t allow building such arguments.
You have to build it using your SDK. See an example in the <a href="/docs/tutorials/using-proxy-caller">Tutorial section</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution">Execution<a href="#execution" class="hash-link" aria-label="Direct link to Execution" title="Direct link to Execution">​</a></h2><p>First thing Odra does with your code, is similar to the one used in <a href="/docs/backends/odra-vm">OdraVM</a> -
a list of entrypoints is generated, thanks to the <code>#[odra::module]</code> attribute.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-18T13:00:02.000Z">Feb 18, 2026</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/backends/odra-vm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OdraVM</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/backends/livenet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Livenet</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#contract-env" class="table-of-contents__link toc-highlight">Contract Env</a><ul><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li><li><a href="#payable" class="table-of-contents__link toc-highlight">Payable</a></li><li><a href="#revert" class="table-of-contents__link toc-highlight">Revert</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a></li></ul></li><li><a href="#test-env" class="table-of-contents__link toc-highlight">Test Env</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#deploying-a-contract-to-casper-network" class="table-of-contents__link toc-highlight">Deploying a contract to Casper network</a><ul><li><a href="#wasm-arguments" class="table-of-contents__link toc-highlight">WASM arguments</a></li><li><a href="#example-deploy-counter" class="table-of-contents__link toc-highlight">Example: Deploy Counter</a></li><li><a href="#example-deploy-erc721" class="table-of-contents__link toc-highlight">Example: Deploy ERC721</a></li><li><a href="#example-deploy-erc1155" class="table-of-contents__link toc-highlight">Example: Deploy ERC1155</a></li></ul></li><li><a href="#sending-cspr-to-a-contract" class="table-of-contents__link toc-highlight">Sending CSPR to a contract</a><ul><li><a href="#using-proxy_callerwasm" class="table-of-contents__link toc-highlight">Using proxy_caller.wasm</a></li></ul></li><li><a href="#execution" class="table-of-contents__link toc-highlight">Execution</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">by <a href="https://odra.dev">odra.dev<a></a></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.495076c2.js"></script>
<script src="/assets/js/main.4ef0cfca.js"></script>
</body>
</html>